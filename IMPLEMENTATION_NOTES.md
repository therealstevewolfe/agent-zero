# Agent Zero Integration Implementation Notes

## 1. Overview
This integration connects the OpenClaw assistant capabilities (Browser, Canvas, Nodes, Messages) into the Agent Zero harness.
By wrapping the `openclaw` CLI as an Agent Zero tool, we empower Agent Zero to leverage OpenClaw's robust ecosystem.

## 2. Integration Components

### A. The Adapter Tool (`agent-zero/python/tools/openclaw_tool.py`)
- **Purpose**: Wraps the `openclaw` CLI to execute commands from Agent Zero.
- **Mechanism**: Takes a `command` argument (e.g., `message send ...`), executes it via `subprocess`, and returns the output.
- **Capabilities**:
    - Send messages (`message send`)
    - Control browser (`browser open`, `browser navigate`)
    - Manage nodes (`nodes status`, `nodes run`)
    - Interact with canvas (`canvas present`)

### B. The System Prompt (`agent-zero/prompts/default/agent.system.tool.openclaw.md`)
- **Purpose**: Instructs the LLM on how to use the `openclaw_tool`.
- **Content**: Provides examples for messaging, browsing, and node management.
- **Integration**: Included in `agent.system.tools.md` so it's available to the agent.

## 3. Architecture Proposal

### Multi-Agent Orchestration
- **Approach**: Use OpenClaw as the high-level orchestrator.
- **Workflow**:
    1.  User sends request to OpenClaw (Telegram/Web).
    2.  OpenClaw analyzes request. If complex, invokes Agent Zero via `openclaw agent invoke agent-zero ...` (future feature) or by sending a message to a dedicated Agent Zero channel.
    3.  Agent Zero executes task, possibly delegating to other agents via `call_subordinate` (internal) or `openclaw subagents` (OpenClaw-managed).
    4.  Agent Zero reports back via `openclaw message send`.

### Cron-Driven Jobs
- **Mechanism**: Leverage OpenClaw's `cron` scheduler.
- **Integration**:
    - Agent Zero can schedule its own recurrence: `openclaw cron add --schedule "0 9 * * *" --command "message send ..."`
    - Or OpenClaw schedules the invocation of Agent Zero scripts.

### Message Routing
- **Mechanism**: OpenClaw handles all external I/O.
- **Routing**:
    - Incoming messages are routed to Agent Zero if they match a specific pattern or if OpenClaw decides to delegate.
    - Outgoing messages from Agent Zero use `openclaw message send`.

## 4. GUI Alignment Plan (Desktop/Mobile)

### Desktop
- **Goal**: Unified control surface.
- **Plan**:
    - **Dashboard**: Add an "Agent Zero" tab to OpenClaw Dashboard.
    - **Terminal**: Embed Agent Zero's TTY output into OpenClaw's web terminal.
    - **Artifacts**: Render HTML/Images generated by Agent Zero in the OpenClaw Canvas or a dedicated "Workspace" view.

### Mobile
- **Goal**: Chat-based interaction.
- **Plan**:
    - **Chat Interface**: Use Telegram/WhatsApp as the primary mobile UI.
    - **Commands**: Support `/agent0 <query>` to direct commands specifically to Agent Zero.
    - **Notifications**: Agent Zero sends proactive notifications (e.g., "Task Complete") via OpenClaw's push notification system (or Telegram).

## 5. Next Steps
1.  **Authentication**: Ensure `openclaw` CLI usage inside Agent Zero (if containerized) has proper authentication tokens.
2.  **Structured Output**: Enhance `openclaw_tool` to return structured JSON for better parsing by Agent Zero.
3.  **Two-way Bridge**: Implement a mechanism for OpenClaw to *interrupt* or *steer* running Agent Zero instances dynamically.
4.  **Testing**: Verify with a live Agent Zero session to ensure prompt adherence and tool execution reliability.
